(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8082:(e,t,a)=>{Promise.resolve().then(a.bind(a,5078))},5078:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),l=a(2115);function n(e){let{stations:t=[],onBuyTicket:a}=e,[n,o]=(0,l.useState)(""),[r,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[h,m]=(0,l.useState)(0),[p,f]=(0,l.useState)(!1),g=async()=>{if(!n||!r||n===r){d("Select different entry and exit stations.");return}f(!0),d(""),x(""),m(0);try{let e=await a(n,r);x(e.ticketId),m(e.price),d("Ticket booked successfully!")}catch(e){d(e.message||"Booking failed.")}finally{f(!1)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center",children:"Book Metro Ticket"}),(0,s.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"Select Entry Station"}),t.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"Select Exit Station"}),t.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{onClick:g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg",disabled:p,children:p?"Booking...":"Buy Ticket"}),c&&(0,s.jsx)("div",{className:"text-center text-sm text-blue-600 font-medium",children:c}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-center text-sm text-gray-800 mt-2",children:["Ticket ID: ",(0,s.jsx)("span",{className:"font-bold",children:u})]}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-800 mt-2",children:["Price: ",(0,s.jsx)("span",{className:"font-bold",children:h})]})]})]})}let o="http://localhost:8080/api";function r(){let[e,t]=(0,l.useState)(""),[a,n]=(0,l.useState)("ENTER"),[r,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(!1),u=async()=>{if(!e){i("Please enter a ticket ID.");return}d(!0),i("");try{let s=await fetch("".concat(o,"/tickets/use"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticketId:e,action:a})});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to use ticket.")}i("Ticket ".concat(a.toLowerCase(),"ed successfully!")),t("")}catch(e){i(e.message)}finally{d(!1)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center",children:"Use Ticket"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter Ticket ID",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"}),(0,s.jsxs)("select",{value:a,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"ENTER",children:"Enter Station"}),(0,s.jsx)("option",{value:"EXIT",children:"Exit Station"})]}),(0,s.jsx)("button",{onClick:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",disabled:c,children:c?"Processing...":"Use Ticket"}),r&&(0,s.jsx)("div",{className:"text-center text-sm text-red-600 font-medium",children:r})]})}function i(){let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!1),c=async()=>{try{let e=await fetch("".concat(o,"/stations")),a=await e.json();t(a)}catch(e){console.error("Failed to load stations",e)}},d=async(e,t)=>{i(!0);let a=await fetch("http://localhost:8080/api/tickets/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entryStation:e,exitStation:t})});if(i(!1),!a.ok)throw Error("Booking failed");return await a.json()};return(0,l.useEffect)(()=>{c()},[]),(0,s.jsxs)("div",{className:" flex flex-row justify-center",children:[(0,s.jsx)(n,{stations:e,onBuyTicket:d,loading:a}),(0,s.jsx)(r,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(8082)),_N_E=e.O()}]);